#!/bin/bash
sebal_engine_dir_path=
crawler_ip=
crawler_nfs_port=
federation_member=

while [ true ]
do
  if pgrep -x "java" > /dev/null
  then
    java_pid="$(pidof java)"
    sudo kill -9 $java_pid
    sleep 10
  fi

  sudo java -Dlog4j.configuration=file:$sebal_engine_dir_path/config/log4j.properties -cp target/sebal-scheduler-0.0.1-SNAPSHOT.jar:target/lib/* org.fogbowcloud.sebal.engine.sebal.crawler.CrawlerMain $sebal_engine_dir_path/config/sebal.conf $crawler_ip $crawler_nfs_port $federation_member &
  sleep 12h
done
